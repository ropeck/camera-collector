# Camera Collector

_this summary is generated by AI. it's sort of correct._

The Camera Collector project automates the process of capturing frames from a live video stream, organizing them, and
generating time-lapse videos. The system uses Kubernetes CronJobs for scheduling and integrates Google Cloud Storage (GCS) for storage and scalability.

The code is intended to be a demonstration of how to use a repository with CICD github, docker and dockerhub automation
along with k8s. The code collects video and makes sunset snippets. 

## Features

- **Automated Frame Collection**: Captures frames from a YouTube live stream or IP camera feed at regular intervals.
- **Time-Lapse Video Generation**: Compiles collected frames into daily videos.
- **Cloud Integration**: Stores processed videos and frames in Google Cloud Storage for easy access.
- **Scalable Architecture**: Built on Kubernetes for deployment flexibility and scalability.
- **Web Application**: Future plans to add a user-friendly interface for viewing and managing content.

## Project Structure

```
camera-collector/
├── scripts/
│   ├── frame_collector.py      # Script for capturing frames
│   ├── video_generator.py      # Script for creating time-lapse videos
├── kubernetes/
│   ├── cronjob.yaml            # Kubernetes CronJob definition
│   ├── ingress.yaml            # NGINX Ingress configuration
│   ├── pvc.yaml                # Persistent Volume Claim for storage
├── Dockerfile                  # Docker image definition for deployment
├── requirements.txt            # Python dependencies
├── README.md                   # Project documentation
└── LICENSE                     # License information
```

## Requirements

### Software

- Kubernetes cluster (e.g., Google Kubernetes Engine)
- Docker
- Python 3.8 or higher
- Google Cloud SDK (for GCS integration)

### Python Dependencies

Listed in `requirements.txt`:

- `opencv-python`
- `ffmpeg-python`
- `google-cloud-storage`
- `numpy`
- `requests`

### Deployment

1. **Build Docker Image**:
   ```bash
   docker build -t camera-collector:latest .
   ```

2. **Deploy to Kubernetes**:
   Apply the provided YAML files to your cluster:
   ```bash
   kubectl apply -f kubernetes/
   ```

3. **Access Web Interface**:
   Use the NGINX Ingress configuration to expose the service. Configure a domain name (e.g., `frames.example.com`) with
   HTTPS support.

## Usage

- **Start Frame Collection**: The Kubernetes CronJob automatically triggers `frame_collector.py` at the scheduled
  interval.
- **Upload to GCS**: Frames and videos are uploaded to a configured GCS bucket.

## Future Plans

- **Enhanced UI**: Develop a React-based frontend for managing and viewing videos and frames.
- **Database Integration**: Add metadata tracking using SQLite or MySQL.
- **Authentication**: Implement OAuth2-based login for secure uploads.
- **Improved Camera Support**: Integrate with IP cameras and custom RTSP streams.
- **Live Video Preview**: Provide a live preview of the camera feed on the web app.
- **Alerts and Notifications**: Notify users of low storage or system errors via email or webhook.
